{% macro title_text(package, category) %}
Download stats for
{% if package != None %}
{{ category_name }} package {{ package }}
{% else %}
Bioconductor {{ category_name }} repository (all packages combined)
{% endif %}
{% endmacro %}

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>

<head>
    <title>{{ title_text(package, category) }}</title>
    <style>
        BODY {
            font-family: sans-serif;
            font-size: 10pt;
        }

        H1 {
            font-size: 16pt;
        }

        H2 {
            font-size: 14pt;
            margin-top: 8px;
            margin-bottom: 4px;
        }

        H3 {
            font-size: 12pt;
            margin-top: 0px;
            margin-bottom: 4px;
        }

        H4 {
            font-size: 11pt;
            margin-top: 0px;
            margin-bottom: 4px;
        }

        TABLE.stats {
            border: solid black 1px;
        }
    </style>
</head>

<body>
    <table style="width: 100%; border-spacing: 0px; border-collapse: collapse;">
        <tr>
            <td style="padding: 0px; text-align: left;">
                <i><a href="../">Back to the "Download stats for Bioconductor software packages"</a></i>
            </td>
        </tr>
    </table>
    <h1 style="text-align: center">{{ title_text(package, category) }}</h1>
    <p style="text-align: center;">
        <i>This page was generated on {{ generated_date }}</i>
    </p>
    <p style="text-align: center">Number of package downloads from the Bioconductor software package repository, year by
        year, from {{ generated_date.year }} back to {{ data_list[0][0] }} (years with no downloads are omitted):</p>
    {% for year, data_table, barplot_data in data_list %}
    <p style="text-align: center;">
        <b>{{ package }}</b> home page: <a href="/packages/release/{{ category }}/html/{{ package }}.html">release
            version</a>, <a href="/packages/devel/{{ category }}/html/{{ package }}.html">devel version</a>.
    </p>
    <hr>
    <h2 style="text-align: center;">{{ year }}</h2>
    <table width="90%" align="center">
        <tr>
            <td style="text-align: center">
                <img src="data:image/png;base64,{{ barplot_data }}" width="720px" height="400px">
            </td>
            <td style="text-align: center">
                <table>
                    <thead>
                        <tr>
                            <th>Month</th>
                            <th>Nb of distinct IPs</th>
                            <th>Nb of downloads</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for year, month, ips, downloads in data_table %}
                        <tr>
                            <td style="text-align: right">{{month}}/{{ year }}</td>
                            <td style="text-align: right; background: #aaaaff">{{ ips }}</td>
                            <td style="text-align: right; background: #ddddff">{{ downloads }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
                <a href="{{ package }}_{{ year }}_stats.tab">
                    {{ package }}_{{ year }}_stats.tab
                </a>
            </td>
        </tr>
    </table>
    {% endfor %}
    <hr>
    <p style="text-align: center">All years in one file:&nbsp;<a href="{{ package or category }}_stats.tab">{{ package or category }}_stats.tab</a></p></body>
</html>